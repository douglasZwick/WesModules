(()=>{var a=class e{constructor(){this.Active=!1,this.CleanupFns=[]}static EnsureValid(t){return e.IsValid(t)?t:new e}static IsValid(t){return typeof t=="object"&&t!=null&&typeof t.Active=="boolean"&&Array.isArray(t.CleanupFns)}RegisterCleanup(t){this.CleanupFns.push(t)}ShutDown(){for(let t of this.CleanupFns)try{t()}catch(n){console.warn(`Cleanup function failed.
Function:`,t,`
Error:`,n)}this.CleanupFns=[],this.Active=!1}},f=class e{static#e=!1;static EnableLogging(){e.#e=!0}static DisableLogging(){e.#e=!1}static IsEnabled(){return e.#e}static Log(...t){e.#e&&console.log(...t)}},o=window;o.WesDebug=f;var g=()=>{},i=null;function S(){if(!i)throw new Error("Tried to access the highlightBox before it was created");return i}var l=null,c={x:0,y:0},b={position:"absolute",pointerEvents:"none",zIndex:"2147483647",border:"1px solid rgba(255, 255, 0, 0.2)",backgroundColor:"rgba(255, 255, 0, 0.2)"};function h(e){o.__WES?.Active||(o.__WES=a.EnsureValid(o.__WES),o.__WES.Active=!0,o.WesDebug?.Log("WebElementSelector framework activated"),x(e),C(),v())}function x(e){g=e,d(()=>g=()=>{})}function C(){i=document.createElement("div"),Object.assign(i.style,b),document.body.appendChild(i),d(y)}function y(){i&&(document.body.removeChild(i),i=null)}function v(){r("mousemove",A,!0),r("scroll",D,!0),r("click",_,!0),r("mousedown",s,!0),r("mouseup",s,!0),r("pointerdown",s,!0),r("pointerup",s,!0),r("keydown",F,!0)}function r(e,t,n){window.addEventListener(e,t,n),d(()=>window.removeEventListener(e,t,n))}function d(e){if(!o.__WES)throw new Error("Tried to register a cleanup before WES was initialized");o.__WES.RegisterCleanup(e)}function A(e){let t=e.clientX,n=e.clientY;c.x=t,c.y=n,p(t,n)}function p(e,t){let n=document.elementFromPoint(e,t);n&&n!==l&&n!==i&&(l=n,W(S(),l,o.scrollX,o.scrollY))}function W(e,t,n,u){let w=t.getBoundingClientRect();B(e,w,n,u)}function B(e,t,n,u){Object.assign(e.style,{top:t.top+u+"px",left:t.left+n+"px",width:t.width+"px",height:t.height+"px"})}function D(e){p(c.x,c.y)}function _(e){s(e),p(e.clientX,e.clientY),l!=null&&(o.WesDebug?.Log("Selected element:",l),g(l)),E()}function s(e){return e.preventDefault(),e.stopImmediatePropagation(),!1}function F(e){e.key==="Escape"&&(s(e),o.WesDebug?.Log("Canceling element selection"),E())}function E(){o.__WES?.Active&&(o.__WES.ShutDown(),l=null)}function m(e){console.log("TestModuleBroccoli engaged"),console.log("Selected element:",e)}h(m);})();
